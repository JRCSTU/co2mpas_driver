<html>
 <body>
  <div>
   <input onclick="window.history.back()" type="button" value="Back"/>
   <input onclick="window.history.forward()" type="button" value="Forward"/>
  </div>
  <html>
   <body>
    <div class="highlight" style="background: #f8f8f8">
     <pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">format_data</span>(data):
    <span style="color: #BA2121; font-style: italic">"""</span>
<span style="color: #BA2121; font-style: italic">    Format data.</span>

<span style="color: #BA2121; font-style: italic">    :param data:</span>
<span style="color: #BA2121; font-style: italic">        Data to be formatted.</span>
<span style="color: #BA2121; font-style: italic">    :type data: dict</span>

<span style="color: #BA2121; font-style: italic">    :return:</span>
<span style="color: #BA2121; font-style: italic">        Formatted data.</span>
<span style="color: #BA2121; font-style: italic">    :rtype: dict</span>
<span style="color: #BA2121; font-style: italic">    """</span>
    data <span style="color: #666666">=</span> copy<span style="color: #666666">.</span>deepcopy(data)
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">isinstance</span>(data<span style="color: #666666">.</span>get(<span style="color: #BA2121">'gear_box_ratios'</span>), <span style="color: #008000">str</span>):
        <span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">json</span>
        data[<span style="color: #BA2121">'gear_box_ratios'</span>] <span style="color: #666666">=</span> json<span style="color: #666666">.</span>loads(data[<span style="color: #BA2121">'gear_box_ratios'</span>])
    <span style="color: #008000; font-weight: bold">for</span> k, v <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">list</span>(data<span style="color: #666666">.</span>items()):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">isinstance</span>(v, <span style="color: #008000">str</span>):
            <span style="color: #008000; font-weight: bold">if</span> v:
                <span style="color: #008000; font-weight: bold">continue</span>
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #AA22FF; font-weight: bold">not</span> np<span style="color: #666666">.</span>atleast_1d(np<span style="color: #666666">.</span>isnan(v))<span style="color: #666666">.</span>any():
            <span style="color: #008000; font-weight: bold">continue</span>
        data<span style="color: #666666">.</span>pop(k)
    <span style="color: #008000; font-weight: bold">return</span> data
</pre>
    </div>
   </body>
  </html>
 </body>
</html>